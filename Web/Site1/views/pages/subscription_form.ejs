<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head %>

    <link rel="stylesheet" href="styles/subscription_form.css">
</head>
<body >



<div class="container wrapper">
    <div class="box">
        <div class="row row-offcanvas row-offcanvas-left">

            <!-- main right col -->
            <div class="column col-sm-12 col-xs-11" id="main">

                <% include ../partials/header.ejs %>

                <div class="padding">

                    <div class="full col-sm-9">

                        <!-- content -->
                        <div class="col-sm-12">
                            <div class="panel panel-default">

                                <div class="panel-heading">
                                    <h4>Register Subscription Spot</h4>
                                </div>

                                <div class="panel-body" id='subscriptionForm'>
                                    <div class='col-sm-6'>
                                        <div class="input-group">
                                            <label>Place name</label>
                                            <input type="text" class="form-control" name="place_name" required>
                                        </div>

                                        <div class="input-group">
                                            <label>Place type</label>

                                            <div>
                                                <select name='place_type' required>
                                                    <option value="" disabled selected>Select</option>
                                                    <option value="school">School</option>
                                                    <option value="construction_site">Construction Site</option>
                                                    <option value="other">Other</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="input-group">
                                            <label>Contact details</label>
                                            <input type="text" class="form-control" name='contact_detail' required>
                                        </div>

                                        <div class="input-group">
                                            <label>Lat</label>
                                            <input id='lat' type="text" class="form-control" disabled="" name='lat'>
                                        </div>

                                        <div class="input-group">
                                            <label>Long</label>
                                            <input id='lng' type="text" class="form-control" disabled="" name='lng'>
                                        </div>

                                    </div>

                                    <div class='col-sm-6'>
                                        <h4>Locatiion</h4>
                                        <div id="map"></div>
                                    </div>
                                </div>

                                <div class='col-sm-12 btn-actions'>
                                    <a href='/subscriptions' class='btn btn-primary' id='btn-submit'>Submit</a>
                                    <a href='/subscriptions' class='btn btn-default' id='btn-cancel'>Cancel</a>
                                </div>

                            </div>
                        </div>

                        <% include ../partials/footer.ejs %>

                    </div><!-- /col-9 -->
                </div><!-- /padding -->
            </div>
            <!-- /main -->

        </div>
    </div>
</div>

<!--post modal-->
<div id="postModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">ï¿½</button>
                Update Status
            </div>
            <div class="modal-body">
                <form class="form center-block">
                    <div class="form-group">
                        <textarea class="form-control input-lg" autofocus=""
                                  placeholder="What do you want to share?"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <div>
                    <button class="btn btn-primary btn-sm" data-dismiss="modal" aria-hidden="true">Post</button>
                    <ul class="pull-left list-inline">
                        <li><a href=""><i class="glyphicon glyphicon-upload"></i></a></li>
                        <li><a href=""><i class="glyphicon glyphicon-camera"></i></a></li>
                        <li><a href=""><i class="glyphicon glyphicon-map-marker"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<% include ../partials/foot.ejs %>

<script>
  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 6.9329258, lng: 79.8632811},
      zoom: 13
    });

    var marker = new google.maps.Marker({
      position: {lat: 6.9329258, lng: 79.8632811},
      map: map,
      draggable: true
    });

    marker.addListener('dragend', setLatLong);
  }

  function setLatLong(cord) {
    $('#lat').val(cord.latLng.lat());
    $('#lng').val(cord.latLng.lng());
  }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBw-XS7ZoHSku9gO7wduUYOP3u-Qew-uWM&callback=initMap"
        async defer></script>

<script src="javascripts/subscription_form.js"></script>
